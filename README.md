# Atlassian AI Gateway ä»£ç† ğŸš€

æ¬¢è¿ä½¿ç”¨ Atlassian AI Gateway ä»£ç†ï¼è¿™æ˜¯ä¸€ä¸ªä¸ OpenAI API å…¼å®¹çš„ä»£ç†æœåŠ¡ï¼Œå®ƒèƒ½å°†æ‚¨çš„è¯·æ±‚å®‰å…¨åœ°è·¯ç”±åˆ° Atlassian çš„ AI Gatewayã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å°†å„ç§æ”¯æŒ OpenAI API çš„å·¥å…·å’Œåº”ç”¨ï¼Œæ— ç¼å¯¹æ¥åˆ° Atlassian æä¾›çš„å¼ºå¤§ AI æ¨¡å‹ä¸Šï¼


## âœ¨ ä¸»è¦åŠŸèƒ½

- **OpenAI å…¼å®¹** ğŸ¤–: å®Œå…¨å…¼å®¹ `/v1/chat/completions` å’Œ `/v1/models` æ¥å£ï¼Œå³æ’å³ç”¨ã€‚
- **å¤šæ¨¡å‹æ”¯æŒ** ğŸ§ : æ”¯æŒæ¥è‡ª Anthropic, Google, å’Œ AWS Bedrock çš„å¤šç§å‰æ²¿æ¨¡å‹ã€‚
- **å¼ºå¤§çš„ç®¡ç†é¢æ¿** âš™ï¸: æä¾› Web UI æ¥ç®¡ç† Atlassian å‡­è¯ã€ç”Ÿæˆå’ŒæŸ¥çœ‹ API å¯†é’¥ã€ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ç­‰ã€‚
- **å‡­è¯ç®¡ç†** ğŸ”‘: é€šè¿‡ç®€æ´çš„ Web ç•Œé¢ï¼Œè½»æ¾ç®¡ç†å¤šä¸ª Atlassian å‡­è¯ï¼ˆé‚®ç®±/Tokenï¼‰ï¼Œå®ç°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨ã€‚
- **æ•°æ®åº“æŒä¹…åŒ–** ğŸ’¾: æ‰€æœ‰å‡­è¯å’Œé…ç½®éƒ½å®‰å…¨åœ°å­˜å‚¨åœ¨ SQLite æ•°æ®åº“ä¸­ã€‚
- **Docker åŒ–éƒ¨ç½²** ğŸ³: æä¾› `Dockerfile`ï¼Œä¸€é”®æ„å»ºå’Œéƒ¨ç½²ï¼Œè½»æ¾æå®šï¼
- **é¦–æ¬¡è¿è¡Œä¿æŠ¤** ğŸ”: é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå®‰å…¨çš„ç®¡ç†å‘˜å¯†ç ï¼Œå¹¶æç¤ºæ‚¨ä¿®æ”¹ã€‚

## ğŸ³ å¿«é€Ÿå…¥é—¨ï¼ˆä½¿ç”¨ Dockerï¼‰

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼Œæ‚¨å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…å¯åŠ¨å¹¶è¿è¡Œä»£ç†æœåŠ¡ã€‚

**1. æ„å»º Docker é•œåƒ**

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
docker build -t atlassian-proxy .
```

**2. è¿è¡Œ Docker å®¹å™¨**

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ä»£ç†æœåŠ¡ã€‚æˆ‘ä»¬é€šè¿‡æŒ‚è½½ä¸€ä¸ªå·æ¥ç¡®ä¿å­˜å‚¨å‡­è¯çš„æ•°æ®åº“æ–‡ä»¶ (`database.db`) ä¸ä¼šä¸¢å¤±ã€‚

```bash
docker run -d -p 8000:8000 --name atlassian-proxy-container -v $(pwd)/data:/app/data atlassian-proxy
```

> **æ³¨æ„**: Windows ç”¨æˆ·è¯·ä½¿ç”¨ `mkdir data` åˆ›å»ºä¸€ä¸ª `data` ç›®å½•ï¼Œç„¶åå°† `$(pwd)/data` æ›¿æ¢ä¸ºè¯¥ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚

**3. è·å–åˆå§‹ç®¡ç†å‘˜å¯†ç **

é¦–æ¬¡è¿è¡Œæ—¶ï¼ŒæœåŠ¡ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶ç®¡ç†å‘˜å¯†ç ã€‚è¯·æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—æ¥è·å–å®ƒï¼š

```bash
docker logs atlassian-proxy-container
```

æ‚¨ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š

```
ğŸ” åˆå§‹ç®¡ç†å‘˜å¯†ç : some-random-password-123
è¯·åœ¨é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹æ­¤å¯†ç 
```

è¯·å¤åˆ¶è¿™ä¸ªå¯†ç ï¼Œæ‚¨é©¬ä¸Šä¼šç”¨åˆ°å®ƒï¼

## ğŸ“– ä½¿ç”¨æŒ‡å—

**1. ç™»å½•ç®¡ç†ç•Œé¢**

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://localhost:8000/admin/login`ã€‚ä½¿ç”¨ä¸Šä¸€æ­¥è·å–çš„åˆå§‹å¯†ç ç™»å½•ã€‚é¦–æ¬¡ç™»å½•åï¼Œç³»ç»Ÿä¼šå¼ºåˆ¶æ‚¨ä¿®æ”¹å¯†ç ã€‚

**2. æ·»åŠ  Atlassian å‡­è¯**

ä¿®æ”¹å¯†ç åï¼Œæ‚¨ä¼šè¿›å…¥å‡­è¯ç®¡ç†é¡µé¢ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ·»åŠ æ‚¨çš„ Atlassian è´¦æˆ·å‡­è¯ï¼ˆé‚®ç®±å’Œ API Tokenï¼‰ã€‚å¯ä»¥æ·»åŠ å¤šä¸ªå‡­è¯ï¼Œä»£ç†ä¼šåœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œè½®è¯¢ï¼Œä»¥æé«˜è¯·æ±‚æˆåŠŸç‡ã€‚

**3. ç”Ÿæˆå¹¶è·å– API å¯†é’¥**

åœ¨å‡­è¯ç®¡ç†é¡µé¢ï¼Œæ‰¾åˆ° API å¯†é’¥éƒ¨åˆ†ï¼Œç‚¹å‡» â€œ**Generate New Token**â€ æŒ‰é’®ã€‚ç³»ç»Ÿä¼šä¸ºæ‚¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ API å¯†é’¥å¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚**è¯·å¤åˆ¶å¹¶å¦¥å–„ä¿ç®¡è¿™ä¸ªå¯†é’¥**ï¼Œå®ƒå°†ç”¨äºè®¿é—®ä»£ç†æœåŠ¡ã€‚

**4. ä½¿ç”¨ä»£ç†æœåŠ¡**

ç°åœ¨ï¼Œæ‚¨å¯ä»¥å°†ä»»ä½• OpenAI å®¢æˆ·ç«¯æŒ‡å‘æ‚¨çš„æœ¬åœ°ä»£ç†åœ°å€äº†ï¼

- **API Base URL**: `http://localhost:8000/v1`
- **API Key**: æ‚¨åœ¨ç¬¬ 3 æ­¥ç”Ÿæˆçš„ API å¯†é’¥ã€‚

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ `curl` çš„ä¾‹å­ã€‚è¯·è®°å¾—å°† `YOUR_GENERATED_API_KEY` æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„å¯†é’¥ã€‚

```bash
curl -X POST http://localhost:8000/v1/chat/completions \
-H "Content-Type: application/json" \
-H "Authorization: Bearer YOUR_GENERATED_API_KEY" \
-d '{
  "model": "anthropic:claude-3-5-sonnet-v2@20241022",
  "messages": [
    {
      "role": "user",
      "content": "ä½ å¥½ï¼Œä¸–ç•Œï¼"
    }
  ]
}'
```

## âš™ï¸ é…ç½®

æ‚¨å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥é…ç½®æœåŠ¡ï¼š

- `PORT`: æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä¸º `8000`ã€‚

ä¾‹å¦‚ï¼Œè¦åœ¨ `8080` ç«¯å£ä¸Šè¿è¡Œï¼š

```bash
docker run -d -p 8080:8080 -e PORT=8080 --name atlassian-proxy-container -v $(pwd)/data:/app/data atlassian-proxy
```

## ğŸ¤– æ”¯æŒçš„æ¨¡å‹

æœ¬ä»£ç†æ”¯æŒä»¥ä¸‹é€šè¿‡ Atlassian AI Gateway æä¾›çš„æ¨¡å‹ï¼š

- `anthropic:claude-3-5-sonnet-v2@20241022`
- `anthropic:claude-3-7-sonnet@20250219`
- `anthropic:claude-sonnet-4@20250514`
- `anthropic:claude-opus-4@20250514`
- `google:gemini-2.0-flash-001`
- `google:gemini-2.5-pro-preview-03-25`
- `google:gemini-2.5-flash-preview-04-17`
- `bedrock:anthropic.claude-3-5-sonnet-20241022-v2:0`
- `bedrock:anthropic.claude-3-7-sonnet-20250219-v1:0`
- `bedrock:anthropic.claude-sonnet-4-20250514-v1:0`
- `bedrock:anthropic.claude-opus-4-20250514-v1:0`

---

å¸Œæœ›æ‚¨ç©å¾—å¼€å¿ƒï¼ğŸ‰ å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æå‡º Issueï¼
